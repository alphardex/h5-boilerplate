<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta http-equiv="X-UA-Compatible" content="ie=edge" />
  <title>{$_arc[title]}</title>
  <meta name="description" content="$_arc[description]" />
  <meta name="keywords" content="$_arc[keywords]" />
  <link rel="stylesheet" href="style.css" />
  <link href="https://cdn.bootcdn.net/ajax/libs/pace/1.0.2/themes/black/pace-theme-loading-bar.min.css"
    rel="stylesheet">
  <script src="https://cdn.bootcdn.net/ajax/libs/pace/1.0.2/pace.min.js"></script>
</head>

<body>
  <!-- 右上角的邀请好友助力图 -->
  <div class="share-tip" hidden></div>
  <div class="backdrop" hidden></div>
  <script>
    // 要等页面加载完毕后才能播放CSS动画
    document.body.classList.add("js-loading");
    window.addEventListener(
      "load",
      () => {
        document.body.classList.remove("js-loading");
      },
      false
    );
  </script>
  <script src="https://static.cs090.com/amazeui/2.7.2/js/jquery.min.js" type="text/javascript"></script>
  <script src="https://res.wx.qq.com/open/js/jweixin-1.0.0.js" type="text/javascript"></script>
  <script src="https://static.cs090.com/global_wap/js/weixin_share.js" type="text/javascript"></script>
  <script src="./scripts/utils.js"></script>
  <script>
    // 初始化微信分享功能，邀请好友能增加机会
    let obj = {};
    obj.mid = ""
    obj.title = "$_arc[title]";
    obj.desc = "$_arc[description]";
    obj.img = "{echo edit_pic_size($_arc[litpic],100,100)}";
    obj.url = "$_arc[arcurl]";
    obj.apilist = "hideMenuItems";
    obj.callback = () => { location = 'main.php?mod=addChance&openid=$openid' };
    wx_share(obj);

    // 关闭“分享给朋友”
    wx.ready(() => {
      wx.hideMenuItems({
        menuList: [
          'menuItem:share:appMessage'
        ]
      });
    });

    const shareTip = document.querySelector('.share-tip')
    const backdrop = document.querySelector('.backdrop')

    // 显示分享提示
    const showShareTip = () => {
      show(backdrop)
      show(shareTip)
    }

    // 隐藏分享提示
    const hideShareTip = () => {
      hide(shareTip)
      hide(backdrop)
    }

    // 分享成功后关闭提示
    wx.ready(() => {   //需在用户可能点击分享按钮前就先调用
      wx.updateAppMessageShareData({
        title: "$_arc[title]", // 分享标题
        desc: "$_arc[description]", // 分享描述
        link: "$_arc[arcurl]", // 分享链接，该链接域名或路径必须与当前页面对应的公众号JS安全域名一致
        imgUrl: "{echo edit_pic_size($_arc[litpic],100,100)}", // 分享图标
        success: () => {
          hideShareTip()
        }
      })
    });
  </script>
  <script src="scripts/index.js"></script>
  <!-- 站长统计 -->
  <div style="display: none;">
    <script type="text/javascript" src="https://s4.cnzz.com/z_stat.php?id=1254561231&web_id=1254561231"></script>
  </div>
</body>

</html>